# HowToCook Mobile App - 开发排期

> MVP 开发周期：6-8 周
> 创建日期：2025-11-02

---

## 📅 总体时间规划

```
Phase 1: 环境搭建与数据准备    Week 1-2   (14天)
Phase 2: 核心页面开发          Week 3-4   (14天)
Phase 3: 卡片式做菜模式        Week 5-6   (14天)
Phase 4: 辅助功能与优化        Week 7     (7天)
Phase 5: 测试与发布            Week 8     (7天)
────────────────────────────────────────────────
总计：                         56天 (8周)
```

---

## 🎯 Phase 1: 环境搭建与数据准备（Week 1-2）

### Week 1: 开发环境搭建

#### Day 1-2: 项目初始化
- [ ] **安装开发工具**
  ```bash
  # 安装 Taro CLI
  npm install -g @tarojs/cli

  # 创建项目
  taro init howtocook-app
  # 选择：React + TypeScript + Zustand
  ```

- [ ] **配置开发环境**
  - [ ] 配置 ESLint + Prettier
  - [ ] 配置 Git hooks (Husky)
  - [ ] 配置 VS Code 插件推荐
  - [ ] 创建 `.gitignore`

- [ ] **项目结构搭建**
  ```bash
  mkdir -p src/{pages,components,store,services,utils,hooks,types,constants,assets}
  ```

- [ ] **配置 Taro**
  - [ ] 配置多端编译 (H5, Weapp, RN)
  - [ ] 配置别名路径 (`@/`)
  - [ ] 配置样式变量
  - [ ] 配置分包策略

#### Day 3-4: 安装依赖与配置

- [ ] **安装核心依赖**
  ```bash
  npm install zustand
  npm install @tarojs/plugin-html
  npm install taro-ui
  npm install dayjs
  ```

- [ ] **安装开发依赖**
  ```bash
  npm install -D @types/node
  npm install -D sass
  npm install -D eslint-config-taro
  ```

- [ ] **配置 TypeScript**
  - [ ] 严格模式配置
  - [ ] 路径别名配置
  - [ ] 类型声明文件

- [ ] **配置小程序开发者工具**
  - [ ] 微信开发者工具配置
  - [ ] 支付宝开发者工具配置（可选）

#### Day 5-7: Hello World 与基础组件

- [ ] **创建第一个页面**
  - [ ] 首页框架
  - [ ] 路由配置
  - [ ] Tabbar 配置

- [ ] **开发基础组件**
  - [ ] Button 组件封装
  - [ ] Icon 组件封装
  - [ ] Loading 组件

- [ ] **测试多端编译**
  ```bash
  # 编译到 H5
  npm run dev:h5

  # 编译到微信小程序
  npm run dev:weapp
  ```

**Week 1 交付物：**
✅ 可运行的 Taro 项目
✅ 基础开发环境配置完成
✅ Hello World 在小程序和 H5 上运行

---

### Week 2: 数据转换脚本

#### Day 8-10: Markdown 解析脚本

- [ ] **创建脚本目录**
  ```bash
  mkdir scripts
  cd scripts
  npm init -y
  npm install marked gray-matter
  ```

- [ ] **编写解析脚本** (`parse-markdown.js`)
  - [ ] 解析菜谱标题
  - [ ] 解析难度星级
  - [ ] 解析食材列表
  - [ ] 解析步骤（核心）
  - [ ] 处理图片路径
  - [ ] 生成唯一 ID

- [ ] **批量转换脚本**
  ```javascript
  // 遍历 dishes/ 目录
  // 解析所有 .md 文件
  // 生成 recipes.json
  ```

- [ ] **测试脚本**
  - [ ] 测试 10 个菜谱
  - [ ] 验证 JSON 格式
  - [ ] 检查数据完整性

#### Day 11-12: 图片处理

- [ ] **图片收集**
  - [ ] 提取所有菜谱图片
  - [ ] 整理图片命名规范

- [ ] **图片优化**
  ```bash
  npm install sharp
  ```
  - [ ] 压缩图片（质量 80%）
  - [ ] 生成缩略图（300x300）
  - [ ] 转换为 WebP 格式（可选）

- [ ] **CDN 配置（可选）**
  - [ ] 使用 GitHub + jsDelivr
  - [ ] 或上传到阿里云 OSS

#### Day 13-14: 数据导入与测试

- [ ] **生成最终数据**
  ```bash
  node scripts/parse-markdown.js
  # 输出: src/assets/data/recipes.json
  ```

- [ ] **数据验证**
  - [ ] 验证 300+ 菜谱成功转换
  - [ ] 检查图片路径正确
  - [ ] 验证分类数据

- [ ] **创建数据服务**
  - [ ] `services/recipe.ts` - 读取 JSON
  - [ ] 初始化本地数据库
  - [ ] 测试数据加载

**Week 2 交付物：**
✅ 完整的 JSON 菜谱数据（300+ 条）
✅ 优化后的图片资源
✅ 数据加载服务

---

## 🎨 Phase 2: 核心页面开发（Week 3-4）

### Week 3: 首页与列表页

#### Day 15-17: 首页开发

- [ ] **首页布局**
  - [ ] 搜索栏
  - [ ] 分类导航（横向滚动）
  - [ ] 推荐菜谱（按难度）
  - [ ] 热门菜谱

- [ ] **分类导航组件** (`CategoryNav`)
  ```typescript
  // 素菜、荤菜、主食、汤粥等
  // 横向滚动
  // 点击跳转列表页
  ```

- [ ] **菜谱卡片组件** (`RecipeCard`)
  ```typescript
  interface RecipeCardProps {
    recipe: Recipe
    onPress: () => void
  }
  // 显示：图片、名称、难度、时间
  ```

- [ ] **搜索功能**
  - [ ] 搜索框组件
  - [ ] 搜索建议
  - [ ] 历史搜索记录

#### Day 18-21: 菜谱列表页

- [ ] **列表页布局**
  - [ ] 顶部筛选栏（难度、时间）
  - [ ] 排序功能
  - [ ] 菜谱网格/列表切换

- [ ] **筛选器组件** (`FilterBar`)
  ```typescript
  // 难度: 1-5星
  // 时间: <15分钟, 15-30分钟, >30分钟
  // 分类: 素菜、荤菜等
  ```

- [ ] **虚拟列表优化**
  ```bash
  npm install @tarojs/components
  # 使用 VirtualList
  ```

- [ ] **下拉刷新 & 上拉加载**
  - [ ] 实现下拉刷新
  - [ ] 实现分页加载
  - [ ] 加载状态展示

**Week 3 交付物：**
✅ 首页完整功能
✅ 菜谱列表页
✅ 搜索与筛选功能

---

### Week 4: 菜谱详情页

#### Day 22-24: 详情页开发

- [ ] **详情页布局**
  - [ ] 顶部大图（轮播）
  - [ ] 菜谱基本信息
    - 名称、难度、时间、份数
  - [ ] 食材清单（分必备/可选）
  - [ ] 步骤预览（折叠）
  - [ ] 底部操作栏

- [ ] **底部操作栏**
  ```
  [收藏] [购物清单] [开始做菜]
  ```

- [ ] **食材清单组件** (`IngredientList`)
  ```typescript
  interface Ingredient {
    name: string
    amount: string
    required: boolean
  }
  // 支持勾选（已准备）
  ```

#### Day 25-28: 详情页功能完善

- [ ] **步骤预览**
  - [ ] 折叠展示所有步骤
  - [ ] 点击展开/收起
  - [ ] 步骤缩略图

- [ ] **份量计算器**
  ```typescript
  // 根据人数调整食材用量
  // 1人份 × 系数 = N人份
  ```

- [ ] **分享功能**
  - [ ] 分享到微信
  - [ ] 生成海报（可选）

- [ ] **收藏功能**
  - [ ] 收藏/取消收藏
  - [ ] 收藏状态同步
  - [ ] 收藏列表

**Week 4 交付物：**
✅ 完整的菜谱详情页
✅ 份量计算功能
✅ 收藏与分享功能

---

## 🎴 Phase 3: 卡片式做菜模式（Week 5-6）

### Week 5: 核心卡片组件

#### Day 29-31: StepCard 组件开发

- [ ] **卡片组件设计** (`StepCard`)
  ```typescript
  interface StepCardProps {
    step: Step
    index: number
    total: number
    onComplete: () => void
    onPrev: () => void
    onNext: () => void
  }
  ```

- [ ] **卡片布局**
  ```
  ┌─────────────────────┐
  │  ⬅ 步骤 2/8      ☰  │
  ├─────────────────────┤
  │                     │
  │   [步骤示意图]      │
  │                     │
  ├─────────────────────┤
  │  2. 切配            │
  │                     │
  │  将西红柿切成4cm    │
  │  小块               │
  │                     │
  │  💡 提示：可以...   │
  │  ⏱ 预计 3分钟       │
  │                     │
  ├─────────────────────┤
  │ ✓ 完成  →  下一步   │
  └─────────────────────┘
  ```

- [ ] **Swiper 集成**
  ```typescript
  import { Swiper, SwiperItem } from '@tarojs/components'
  ```

#### Day 32-35: 做菜模式页面

- [ ] **做菜模式页面** (`cooking-mode/index`)
  - [ ] 全屏模式
  - [ ] 隐藏 Tabbar
  - [ ] 沉浸式体验

- [ ] **手势交互**
  - [ ] 左右滑动切换步骤
  - [ ] 点击完成按钮
  - [ ] 长按图片放大

- [ ] **进度管理**
  ```typescript
  // 使用 store/cooking.ts
  const { currentStep, completedSteps } = useCookingStore()
  ```

- [ ] **步骤完成动画**
  - [ ] 完成打钩动画
  - [ ] 卡片切换动画
  - [ ] 进度条动画

**Week 5 交付物：**
✅ 完整的步骤卡片组件
✅ 基础做菜模式交互

---

### Week 6: 做菜辅助功能

#### Day 36-38: 计时器功能

- [ ] **计时器组件** (`Timer`)
  ```typescript
  interface TimerProps {
    duration: number
    onFinish: () => void
  }
  ```

- [ ] **多计时器管理**
  - [ ] 支持同时运行多个计时器
  - [ ] 悬浮显示
  - [ ] 后台运行

- [ ] **计时器提醒**
  - [ ] 倒计时结束通知
  - [ ] 震动提醒
  - [ ] 声音提醒（可选）

#### Day 39-42: 防息屏与语音

- [ ] **防息屏功能**
  ```typescript
  // 使用 Taro API
  Taro.setKeepScreenOn({ keepScreenOn: true })
  ```

- [ ] **语音播报（可选）**
  ```typescript
  // 使用系统 TTS
  // 或第三方语音服务
  ```

- [ ] **手势快捷操作**
  - [ ] 双击图片放大
  - [ ] 上滑显示完整菜谱
  - [ ] 下滑返回

- [ ] **退出确认**
  - [ ] 中途退出提示
  - [ ] 保存进度

**Week 6 交付物：**
✅ 完整的卡片式做菜模式
✅ 计时器功能
✅ 防息屏功能
✅ 核心功能演示视频

---

## 🛠️ Phase 4: 辅助功能与优化（Week 7）

### Day 43-45: 购物清单

- [ ] **购物清单页面**
  - [ ] 列表展示
  - [ ] 勾选已购买
  - [ ] 删除功能

- [ ] **从菜谱生成清单**
  ```typescript
  // 一键添加所有食材
  // 支持多个菜谱合并
  ```

- [ ] **分类展示**
  - [ ] 按食材类型分组
  - [ ] 蔬菜、肉类、调料等

### Day 46-47: 个人中心

- [ ] **个人中心页面**
  - [ ] 收藏的菜谱
  - [ ] 浏览历史
  - [ ] 做菜记录

- [ ] **设置页面**
  - [ ] 偏好设置
  - [ ] 通知设置
  - [ ] 关于页面

### Day 48-49: 性能优化

- [ ] **首屏优化**
  - [ ] 骨架屏
  - [ ] 预加载
  - [ ] 懒加载

- [ ] **图片优化**
  - [ ] 懒加载
  - [ ] 占位图
  - [ ] 压缩质量

- [ ] **代码优化**
  - [ ] useMemo / useCallback
  - [ ] 防抖节流
  - [ ] 分包加载

**Week 7 交付物：**
✅ 购物清单功能
✅ 个人中心完善
✅ 性能优化完成

---

## 🧪 Phase 5: 测试与发布（Week 8）

### Day 50-52: 功能测试

- [ ] **功能测试清单**
  - [ ] 浏览菜谱 ✓
  - [ ] 搜索与筛选 ✓
  - [ ] 卡片式做菜 ✓
  - [ ] 收藏功能 ✓
  - [ ] 购物清单 ✓
  - [ ] 计时器 ✓

- [ ] **真机测试**
  - [ ] iOS 设备测试
  - [ ] Android 设备测试
  - [ ] 微信小程序真机测试

- [ ] **兼容性测试**
  - [ ] 不同屏幕尺寸
  - [ ] 不同系统版本
  - [ ] 不同微信版本

### Day 53-54: Bug 修复

- [ ] **收集问题清单**
- [ ] **优先级排序**
- [ ] **修复关键 Bug**
- [ ] **回归测试**

### Day 55-56: 打包发布

- [ ] **小程序发布**
  ```bash
  npm run build:weapp
  ```
  - [ ] 上传到微信后台
  - [ ] 填写版本信息
  - [ ] 提交审核
  - [ ] 等待审核通过

- [ ] **App 打包**
  ```bash
  # iOS
  npm run build:rn -- --platform ios

  # Android
  npm run build:rn -- --platform android
  ```
  - [ ] 签名配置
  - [ ] 打包 ipa/apk
  - [ ] 上传到应用商店

- [ ] **准备宣传材料**
  - [ ] 应用截图
  - [ ] 应用描述
  - [ ] 宣传视频

**Week 8 交付物：**
✅ 测试报告
✅ 小程序上线
✅ App 提交审核

---

## 📊 任务统计

### 总任务数
- Phase 1: 30 个任务
- Phase 2: 35 个任务
- Phase 3: 30 个任务
- Phase 4: 20 个任务
- Phase 5: 15 个任务

**总计：130 个任务**

### 工作量估算
- 每天工作量：3-5 个任务
- 每周工作日：5-7 天
- 总计：8 周（56 天）

---

## 🎯 关键里程碑

| 里程碑 | 时间 | 目标 |
|-------|------|------|
| M1: 环境就绪 | Week 2 末 | 可运行的项目 + 完整数据 |
| M2: 页面完成 | Week 4 末 | 首页、列表、详情页完成 |
| M3: 核心功能 | Week 6 末 | 卡片式做菜模式完成 |
| M4: MVP 完成 | Week 7 末 | 所有功能开发完成 |
| M5: 正式发布 | Week 8 末 | 上线小程序和 App |

---

## 📝 每日工作建议

### 工作时间分配
```
研究/学习:    2 小时/天
编码实现:    4-6 小时/天
测试调试:    1-2 小时/天
文档整理:    0.5 小时/天
```

### AI 辅助开发建议
- 使用 Claude / GPT-4 辅助编码
- 让 AI 生成组件框架代码
- 让 AI 帮助调试问题
- 让 AI 写单元测试

---

## 🔄 风险管理

### 可能的延期因素
1. **技术难题**（+1-2天）
   - Taro 多端兼容性问题
   - 复杂交互实现困难

2. **需求变更**（+2-3天）
   - 用户体验调整
   - 功能范围扩大

3. **审核延期**（+3-7天）
   - 小程序审核被拒
   - App 审核周期长

### 应对策略
- 预留 buffer 时间（1-2周）
- MVP 优先，砍掉非必要功能
- 及早测试，及早发现问题

---

**最后更新：** 2025-11-02
**文档版本：** v1.0
